plot(as.numeric(ECTS))
ECTS[1]
as.numeric(ECTS[1])
LOL <- NA
gsub(',','.',LOL)
Department
Department[1:3]
Department[1:3]
SecondaryDepartment[1:3]
TotalData
TotalData[1]
str(TotalData)
describe(TotalData)
length(TotalData)
length(ECTS)
ECTS[1:6]
TotalData[1:5]
length(TotalData[1:5])
length(ECTS[1:5])
length(CourseType[1:5])
lol <- data.frame(data = TotalData[1:5],ECTS = ECTS[1:5],Department = Department[1:5], SecondaryDepartment = SecondaryDepartment[1:5], CourseType = CourseType[1:5])
str(TotalData)
ncol(TotalData[1:5])
ncol(ECTS[1:5])
loletes <- list(Data = TotalData[1:5], ECTS=ECTS[1:5], Department = Department[1:5], SecondaryDepartment = SecondaryDepartment[1:5])
str(loletes)
loletes[1]
loletes[2]
loletes[[2]]
loletes[[2]][1]
loletes[[1]][1]
ncol(ECTS[1:5])
depatments
loletes
depatments
depatments[2]
loletes
loletes$Department
depatments[2]
loletes$Department[1]
loletes$Department[1]== depatments[2]
##packages and so on...
rm(list=ls())
require(rvest)
library(stringi)
library(RCurl)
library(rlist)
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
source('GetUrlData.R')
##link
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
##Third page
state_GetGradeTable <- 'td tr+ tr td:nth-child(2)'
#state_Attendants <- 'h2+ table td+ td'
state_Attendants <-'h2+ table tr:nth-child(4) td+ td , h2+ table tr:nth-child(3) td+ td , h2+ table tr:nth-child(2) td+ td , h2+ table tr:nth-child(1) td+ td'
## Get courses
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
##Initialazing the data frame, CHECK TO MAKE OVERALL AND NOT FOR WINTER ONLY
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
for (ii in CourseInfoLinks){
if (url.exists(ii)){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
#get CourseType credits
res2 <- try(CourseType[jj]<-GetUrlData(urlPath=ii,state_CourseTypr),silent=TRUE)
if (inherits(res2,'try-error')){
CourseType[jj] <- NA
}else{
CourseTypeTemp <- GetUrlData(urlPath=ii,state_CourseTypr)
CourseType[jj] <- CourseTypeTemp[1]
}
# get Deparment and secondary
res3 <- try(Department[jj]<-GetUrlData(urlPath=ii,state_GetDepartment),silent=TRUE)
if (inherits(res3,'try-error')){
Department[jj] <- NA
}else{
Department[jj] <- GetUrlData(urlPath=ii,state_GetDepartment)
}
res4<-try(SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary),silent=TRUE)
if (inherits(res4,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary)
}
}else{
ECTS[jj]<- NA
CourseType[jj]<- NA
Department[jj]<- NA
SecondaryDepartment[jj]<- NA
}
ECTS[jj] <- gsub(',','.',ECTS[jj])
jj<-jj+1
}
ECTS[1:5]
plot(as.numeric(ECTS))
save('firstLoopData.Rdata',file='C:/Users/Dimitrios\Documents/Dimitris_general/R programming my projects/DTUprject')
save('firstLoopData.Rdata',file='C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
save('firstLoopData.Rdata',file='C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject/FirstLoopResults')
Results <- list(ECTS = ECTS,CourseType= CourseType,Department=Department,SecondaryDepartment=SecondaryDepartment)
save('Results.Rdata',file='C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject/FirstLoopResults')
save('Results',file='C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject/FirstLoopResults')
load(FirstLoopResults)
load('FirstLoopResults')
Results
Unique(Department)
nique(Department)
unique(Department)
ECTS
ECTS=='5'
ECTS==NA
is.na(ECTS)
SUM(is.na(ECTS))
sum(is.na(ECTS))
sum(is.na(ECTS))/length(ECTS)
sum(ECTS=='5')
sum(ECTS=='5',is.na=TRUE)
sum(ECTS=='5',na.rm=TRUE)
unique(ECTS)
UniqueECTS <- unique(ECTS)
length(UniqueECTS)
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
load('FirstLoopResults')
Results
str(Results)
unique(Results$CourseType)
sum(ECTS=='5',na.rm=TRUE)
sum(Results$ECTS=='5')
sum(Results$ECTS=='5' and Results$CourseType=='MSc')
[Results$ECTS=='5' and Results$CourseType=='MSc']
library(swirl)
swirl()
read.csv(path2csb, stringsAsFactors =FALSE)
read.csv(path2csV, stringsAsFactors =FALSE)
path2csv
mydf<- path2csv, stringsAsFactors = FALSE)
mydf<- read.csv(path2csv, stringsAsFactors = FALSE)
dim(mydf)
head(mydf)
library(dplyr)
packageVersion('dplyr')
cran <- tbl_df(mydf)
rm('mydf')
cran
?select
select(cran,ip_id, package, country)
5:20
select(cran, r_arch:country)
select(cran, country:r_arch)
cran
select(cran, -time)
-5:20
-(5:20)
select(cran,-(X:sizew))
select(cran,-(X:sizew))
select(cran,-(X:size))
filter(cran, package =='swirl')
?
sd
lol
fileter(cra)
fileter(cran)
filter(cran)
info()
bye()
ECTS
dataExtracted <- data.frame(row.names=CourseNum,CourseType = CourseType, ECTS = ECTS, Department = Department, SecondaryDepartment = SecondaryDepartment)
unique(CourseNum)
ListConsentraded
ListConsentraded <- list(Data = TotalData, ECTS=ECTS, Department = Department, SecondaryDepartment = SecondaryDepartment)
ListConsentraded
ListConsentraded
ListConsentraded <- list(Course = CourseNum,CourseType= CourseType, ECTS=ECTS, Department = Department, SecondaryDepartment = SecondaryDepartment)
ListConsentraded
str(ListConsentraded)
library(dplyr)
tbl_df(ListConsentraded)
data.frame(ListConsentraded)
a <- data.frame(ListConsentraded)
str(a)
unique(SecondaryDepartment)
plot(as.numeric(SecondaryDepartment))
plot(SecondaryDepartment)
SecondaryDepartment
GetUrlData(urlPath='http://www.kurser.dtu.dk/2015-2016/02632.aspx?menulanguage=en-gb','#pagecontents tr:nth-child(2) div')
try(GetUrlData(urlPath='http://www.kurser.dtu.dk/2015-2016/02632.aspx?menulanguage=en-gb','#pagecontents tr:nth-child(2) div'),silent=TRUE)
Department
a
a[[1]]
a[[1]][1]
a[[1]]
b <- tbl_df(a)
b
filter(b,ECTS==10)
filter(b,ECTS==5)
unique(Department)
gsub('[\r\n ]','',Department)
gsub('[\r\n ]',' ',Department)
rm(list=ls())
load('FirstLoopResults')
Results
str(Results)
source('GetUrlData.R')
##link
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
##Third page
state_GetGradeTable <- 'td tr+ tr td:nth-child(2)'
#state_Attendants <- 'h2+ table td+ td'
state_Attendants <-'h2+ table tr:nth-child(4) td+ td , h2+ table tr:nth-child(3) td+ td , h2+ table tr:nth-child(2) td+ td , h2+ table tr:nth-child(1) td+ td'
## Get courses
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
CourseNum
CourseNum=='02632'
sum(CourseNum=='02632')
CourseNum
##packages and so on...
rm(list=ls())
source('GetUrlData.R')
url2 <-'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E,E1;E1A;E1B,E2;E2A;E2B,E3;E3A;E3B,E4;E4A;E4B,E5;E5A;E5B,F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;F2B;F3B;F4B;F5B;F,F1;F1A;F1B,F2;F2A;F2B,F3;F3A;F3B,F4;F4A;F4B,F5;F5A;F5B,January,August;July;SummerSchool;June,August,July,June,SummerSchool&YearGroup=2014-2015,2015-2016&btnSearch=Search'
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
categories<-GetUrlData(urlPath=url2,state=state_GetCourse)
categories<-unique(categories)
categories
CourseNum <- substring(categories,1,5)
CourseNum == '02632'
sum(CourseNum == '02632')
which(CourseNum == '02632')
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
CourseInfoLinks[197]
source('Script DTU.R')
GetUrlData(urlPath=ii,state_GetDepartmentSecondary)
state_GetDepartmentSecondary
ii
GetUrlData(urlPath=ii,'tr:nth-child(2) div')
rm(list=ls())
rm(list=ls())
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
source('GetUrlData.R')
##link
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
url2 <-'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E,E1;E1A;E1B,E2;E2A;E2B,E3;E3A;E3B,E4;E4A;E4B,E5;E5A;E5B,F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;F2B;F3B;F4B;F5B;F,F1;F1A;F1B,F2;F2A;F2B,F3;F3A;F3B,F4;F4A;F4B,F5;F5A;F5B,January,August;July;SummerSchool;June,August,July,June,SummerSchool&YearGroup=2014-2015,2015-2016&btnSearch=Search'
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- 'tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
##Third page
state_GetGradeTable <- 'td tr+ tr td:nth-child(2)'
#state_Attendants <- 'h2+ table td+ td'
state_Attendants <-'h2+ table tr:nth-child(4) td+ td , h2+ table tr:nth-child(3) td+ td , h2+ table tr:nth-child(2) td+ td , h2+ table tr:nth-child(1) td+ td'
## Get courses
categories<-GetUrlData(urlPath=url2,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
##Initialazing the data frame
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
for (ii in CourseInfoLinks){
if (url.exists(ii)){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
#get CourseType credits
res2 <- try(CourseType[jj]<-GetUrlData(urlPath=ii,state_CourseTypr),silent=TRUE)
if (inherits(res2,'try-error')){
CourseType[jj] <- NA
}else{
CourseTypeTemp <- GetUrlData(urlPath=ii,state_CourseTypr)
CourseType[jj] <- CourseTypeTemp[1]
}
# get Deparment and secondary
res3 <- try(Department[jj]<-GetUrlData(urlPath=ii,state_GetDepartment),silent=TRUE)
if (inherits(res3,'try-error')){
Department[jj] <- NA
}else{
Department[jj] <- GetUrlData(urlPath=ii,state_GetDepartment)
}
res4<-try(SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary),silent=TRUE)
if (inherits(res4,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary)
}
}else{
ECTS[jj]<- NA
CourseType[jj]<- NA
Department[jj]<- NA
SecondaryDepartment[jj]<- NA
}
ECTS[jj] <- gsub(',','.',ECTS[jj])
Department[jj] <- gsub('[\r\n ]',' ',Department[jj])
SecondaryDepartment[jj] <- gsub('[\r\n ]',' ',SecondaryDepartment[jj])
jj<-jj+1
}
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
load('FirstLoopResults')
rm(list=ls())
etwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
load('FirstLoopResults')
library(dplyr)
a
a<-data.frame(Results)
Data <- tbl_df(a)
Data
?barplot
filter(Data,CourseType=BSc)
filter(Data,CourseType==BSc)
filter(Data,CourseType=='BSc')
size(filter(Data,CourseType==BSc))
nrow(filter(Data,CourseType==BSc))
nrow(filter(Data,CourseType=='BSc'))
numberOfBScCourses <- nrow(filter(Data,CourseType=='BSc'))
unique(Data$CourseType)
numberOfBScCourses <- nrow(filter(Data,CourseType=='BSc'))
numberOfMScCourses <- nrow(filter(Data,CourseType=='MSc'))
numberOfPhDCourses <- nrow(filter(Data,CourseType=='Ph.D.'))
numberOfDiplomaCourses <- nrow(filter(Data,CourseType=='Diplomingeniør'))
numberOfPartTimeCourses <- nrow(filter(Data,CourseType=='pARTTIME MASTER dELTIDSDIPLOM'))
numberOfPartTimeCourses <- nrow(filter(Data,CourseType=='pArttime master Deltidsdiplom'))
numberOfPartTimeCourses <- nrow(filter(Data,CourseType=='PArttime master Deltidsdiplom'))
numberOfPartTimeCourses <- nrow(filter(Data,CourseType=='Parttime master Deltidsdiplom'))
numberOfPartTimeCourses
Data$CourseType
str(Data$CourseType)
Data$CourseType
numberOfPartTimeCourses <- nrow(filter(Data,CourseType=='Deltidsdiplom'))
numberOfPartTimeCourses <- nrow(filter(Data,CourseType=='Parttime master'))
numberOfDeltiCourses <- nrow(filter(Data,CourseType=='Deltidsdiplom'))
height <- c(numberOfBScCourses,numberOfDeltiCourses,numberOfDiplomaCourses,numberOfMScCourses,numberOfPartTimeCourses,numberOfPhDCourses)
barplot(height)
str(b)
str(Data)
library(reshape2)
library(ggplot2)
str(Data)
rm(list=ls())
rm(list=ls())
require(rvest)
library(stringi)
library(RCurl)
library(rlist)
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
source('GetUrlData.R')
##link
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
url2 <-'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E,E1;E1A;E1B,E2;E2A;E2B,E3;E3A;E3B,E4;E4A;E4B,E5;E5A;E5B,F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;F2B;F3B;F4B;F5B;F,F1;F1A;F1B,F2;F2A;F2B,F3;F3A;F3B,F4;F4A;F4B,F5;F5A;F5B,January,August;July;SummerSchool;June,August,July,June,SummerSchool&YearGroup=2014-2015,2015-2016&btnSearch=Search'
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- 'tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
##Third page
state_GetGradeTable <- 'td tr+ tr td:nth-child(2)'
#state_Attendants <- 'h2+ table td+ td'
state_Attendants <-'h2+ table tr:nth-child(4) td+ td , h2+ table tr:nth-child(3) td+ td , h2+ table tr:nth-child(2) td+ td , h2+ table tr:nth-child(1) td+ td'
## Get courses
categories<-GetUrlData(urlPath=url2,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
##Initialazing the data frame
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
for (ii in CourseInfoLinks){
if (url.exists(ii)){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
#get CourseType credits
res2 <- try(CourseType[jj]<-GetUrlData(urlPath=ii,state_CourseTypr),silent=TRUE)
if (inherits(res2,'try-error')){
CourseType[jj] <- NA
}else{
CourseTypeTemp <- GetUrlData(urlPath=ii,state_CourseTypr)
CourseType[jj] <- CourseTypeTemp[1]
}
# get Deparment and secondary
res3 <- try(Department[jj]<-GetUrlData(urlPath=ii,state_GetDepartment),silent=TRUE)
if (inherits(res3,'try-error')){
Department[jj] <- NA
}else{
Department[jj] <- GetUrlData(urlPath=ii,state_GetDepartment)
}
res4<-try(SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary),silent=TRUE)
if (inherits(res4,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary)
}
}else{
ECTS[jj]<- NA
CourseType[jj]<- NA
Department[jj]<- NA
SecondaryDepartment[jj]<- NA
}
ECTS[jj] <- gsub(',','.',ECTS[jj])
Department[jj] <- gsub('[\r\n ]',' ',Department[jj])
SecondaryDepartment[jj] <- gsub('[\r\n ]',' ',SecondaryDepartment[jj])
jj<-jj+1
}
