x5<- gsub('[\r\n (Efter7 trinsskalaen) ]','',AverageGrade)
x5
x5<- gsub('[\r\n - (Efter7 trinsskalaen) ]','',AverageGrade)
x5
x5<- gsub('[\r\n :-: (Efter7 trinsskalaen) ]','',AverageGrade)
x5
x5<- gsub('[:-:]','',AverageGrade)
x5
x5<- gsub('[:punct:]','',AverageGrade)
x5
x5<- gsub('[\r\n :-: (Efter7 trinsskalaen) ]','',AverageGrade)
x5
gsub('-','',x5)
x5<- gsub('[\r\n :-: (Efter7 trinsskalaen) ] - ','',AverageGrade)
x5
df
tr:nth-child(2) div
require(rvest)
## Fall semester
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
#Initialazing the data frame
Period <- 'Winter-2014'
df <- data.frame(matrix(nrow=length(categories),ncol=0))
CourseNum <- substring(categories,1,5)
GeneralLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
GradeLinks2 <- paste('http://karakterer.dtu.dk/Histogram/1/',CourseNum,'/',Period,sep='')
jj <- 1
CourseType <- rep(0,length(GeneralLinks))
ECTS <- rep(0,length(GeneralLinks))
Department <- rep(0,length(GeneralLinks))
SecondaryDepartment <- rep(0,length(GeneralLinks))
AverageGrade <- rep(0,length(GeneralLinks))
#TempHist <- rep(0,c(100,100))
for (ii in GeneralLinks){
res<-try(ECTS[jj]<-ii %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) .value') %>%
html_text,silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<-ii %>%
html() %>%
html_nodes('.normal+ table tr:nth-child(4) .value') %>%
html_text
}else{
ECTS[jj]<-ii %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) .value') %>%
html_text
}
CourseTypeTemp <- ii %>%
html() %>%
html_nodes('.value div:nth-child(1)') %>%
html_text
CourseType[jj] <- CourseTypeTemp[1]
Department[jj] <- ii %>%
html() %>%
html_nodes('.SubTableLevel2 tr:nth-child(1) .page+ td') %>%
html_text
res2<-try(SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text,silent=TRUE)
if (inherits(res2,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text
}
AverageGrade[jj] <- GradeLinks2[jj] %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) td+ td') %>%
html_text
#for (kk in TempHist){
#}
jj<-jj+1
}
rownames(df)<-categories
df$ECTS <- ECTS
df$CourseType <- CourseType
df$Department <- gsub('[\r\n]','',Department)
df$SecondaryDepartment <- gsub('[\r\n]','',SecondaryDepartment)
AverageGradeTemp <- gsub('[\r\n (Efter7 trinsskalaen) ]','',AverageGrade)
df$AverageGrade <- gsub('-','',AverageGrade)
df
df[1]
df[2]
df[3]
df[4]
df[5]
df$AverageGrade <- gsub('-','',AverageGradeTemp)
df[5]
require(rvest)
## Fall semester
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
#Initialazing the data frame
Period <- 'Winter-2014'
df <- data.frame(matrix(nrow=length(categories),ncol=0))
CourseNum <- substring(categories,1,5)
GeneralLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
GradeLinks2 <- paste('http://karakterer.dtu.dk/Histogram/1/',CourseNum,'/',Period,sep='')
jj <- 1
CourseType <- rep(0,length(GeneralLinks))
ECTS <- rep(0,length(GeneralLinks))
Department <- rep(0,length(GeneralLinks))
SecondaryDepartment <- rep(0,length(GeneralLinks))
AverageGrade <- rep(0,length(GeneralLinks))
#TempHist <- rep(0,c(100,100))
for (ii in GeneralLinks){
res<-try(ECTS[jj]<-ii %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) .value') %>%
html_text,silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<-ii %>%
html() %>%
html_nodes('.normal+ table tr:nth-child(4) .value') %>%
html_text
}else{
ECTS[jj]<-ii %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) .value') %>%
html_text
}
CourseTypeTemp <- ii %>%
html() %>%
html_nodes('.value div:nth-child(1)') %>%
html_text
CourseType[jj] <- CourseTypeTemp[1]
Department[jj] <- ii %>%
html() %>%
html_nodes('.SubTableLevel2 tr:nth-child(1) .page+ td') %>%
html_text
res2<-try(SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text,silent=TRUE)
if (inherits(res2,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text
}
AverageGrade[jj] <- GradeLinks2[jj] %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) td+ td') %>%
html_text
#for (kk in TempHist){
#}
jj<-jj+1
}
rownames(df)<-categories
df$ECTS <- ECTS
df$CourseType <- CourseType
df$Department <- gsub('[\r\n]','',Department)
df$SecondaryDepartment <- gsub('[\r\n]','',SecondaryDepartment)
AverageGradeTemp <- gsub('[\r\n (Efter7 trinsskalaen) ]','',AverageGrade)
df$AverageGrade <- gsub('-','',AverageGradeTemp)
df[1]
df[2]
df[3]
df[4]
df[5]
df[6]
df[5]
as.numeric(df[5])
as.list(df[5])
a<-as.list(df[5])
a
a[1]
a[[1]]
as.numeric(a[[1]])
lol <- gsub('[\r\n (Efter7 trinsskalaen) ]','',AverageGrade)
lol
lol2<-gsub('-','',lol)
lol2
lol3 <- gsub(',','.',lol2)
lol3
as.numeric(lol3)
rm(list=ls())
require(rvest)
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
categories
rm(list=ls())
require(rvest)
## Fall semester
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
#Initialazing the data frame
Period <- 'Winter-2014'
df <- data.frame(matrix(nrow=length(categories),ncol=0))
CourseNum <- substring(categories,1,5)
GeneralLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
GradeLinks2 <- paste('http://karakterer.dtu.dk/Histogram/1/',CourseNum,'/',Period,sep='')
jj <- 1
CourseType <- rep(0,length(GeneralLinks))
ECTS <- rep(0,length(GeneralLinks))
Department <- rep(0,length(GeneralLinks))
SecondaryDepartment <- rep(0,length(GeneralLinks))
AverageGrade <- rep(0,length(GeneralLinks))
#TempHist <- rep(0,c(100,100))
for (ii in GeneralLinks){
res<-try(ECTS[jj]<-ii %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) .value') %>%
html_text,silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<-ii %>%
html() %>%
html_nodes('.normal+ table tr:nth-child(4) .value') %>%
html_text
}else{
ECTS[jj]<-ii %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) .value') %>%
html_text
}
CourseTypeTemp <- ii %>%
html() %>%
html_nodes('.value div:nth-child(1)') %>%
html_text
CourseType[jj] <- CourseTypeTemp[1]
Department[jj] <- ii %>%
html() %>%
html_nodes('.SubTableLevel2 tr:nth-child(1) .page+ td') %>%
html_text
res2<-try(SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text,silent=TRUE)
if (inherits(res2,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text
}
AverageGrade[jj] <- GradeLinks2[jj] %>%
html() %>%
html_nodes('h2+ table tr:nth-child(4) td+ td') %>%
html_text
#for (kk in TempHist){
res3<-try(SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text,silent=TRUE)
if (inherits(res3,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-ii %>%
html() %>%
html_nodes('#pagecontents tr:nth-child(2) div') %>%
html_text
}
#}
jj<-jj+1
}
rownames(df)<-categories
df$ECTS <- ECTS
df$CourseType <- CourseType
df$Department <- gsub('[\r\n]','',Department)
df$SecondaryDepartment <- gsub('[\r\n]','',SecondaryDepartment)
AverageGradeTemp <- gsub('[\r\n (Efter7 trinsskalaen) ]','',AverageGrade)
AverageGradeTemp <- gsub(',','.',AverageGradeTemp)
df$AverageGrade <- gsub('-','',AverageGradeTemp)
rm(list=ls())
require(rvest)
## Fall semester
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
#Initialazing the data frame
rm(list=ls())
require(rvest)
## Fall semester
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
rm(list=ls())
require(rvest)
url<- 'http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E&YearGroup=2014-2015,2015-2016&btnSearch=Search'
categories <- url %>%
html() %>%
html_nodes('#ctl00_PlaceHolderMain_PageHtml td div a') %>%
html_text()
categories<-unique(categories[200:210])
departments <- url %>%
html() %>%
html_nodes('#lstDepartment option') %>%
html_text()
12*30+7*10+2*10+10*15+4*10+7*5+7*10+10*10+4*5+4*5+10*10
985/120
rm(list=ls())
urls <- paste0('http://stat.columbia.edu/~rachel/datasets/nyt',as.character(1:31),'.csv')
data1 <- read.csv(url('http://stat.columbia.edu/~rachel/datasets/nyt1.csv'))
limits <- c(-Inf,18,24,34,44,54,64,Inf)
str(data1)
data1$Agecut <- cut(data1$Age,limits)
data1
head(data1)
summaryBy
library('doBy')
summaryBy
summaryBy(Age,data=data1)
str(data1)
summaryBy(Age,data=data1)
summaryBy(Age+Gender,data=data1)
summaryBy(Gender,data=data1)
summaryBy(Gender~Age,data=data1)
summaryBy(Age~Gender,data=data1)
siterange <- function(x){c(length(x),min(x),mean(x),max(x))}
summaryBy(Age~Gender,data=data1,FUN=siterange)
rm(list=ls())
library(dplyr)
library(ggplot2)
library(reshape2)
library('doBy')
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
load('DATA4')
Filenames <- paste0('DATA3_',as.character(1:18))
Data <- lapply(Filenames,function(fn) {
load(fn)
return (TotalData)
})
Data <- unlist(Data,recursive=FALSE)
a<-data.frame(DATA4)
head(Data)
NumberOfCourses
Data[1]
Data[1][[1]]
Data[[1]]
Data[[1]][[1]]
Data[[1]][[1]][[1]]
Data[[1]][[1]][[1]][1]
Data[[1]][[1]][[1]][4]
Data[[1]][[1]][[1:2]][4]
Data[[1]][[1]][[1:3]][4]
Data[[1]][[1]][[2]][4]
Data[[1]][[1]][[3]][4]
Data[[1]][[1]][[4]][4]
Data[[1]][[1]][[4]]
Data[[1]][[1]]
Data[[1]][[1]][[1]]
Data[[1]][[[1]]]
Data[[1]][[1]]
Data[[1]][[2]]
Data[[1]][[3]]
Data[[1]][[1]]
Data[[1]][[1]][[4]]
Data[[1]][[1]][4]
Data[[1]][[1]][[1]]
Data[[1]][[2]][[1]]
Data[[1]][[3]][[1]]
Data[[1]][[3]][[1]][[4]]
Data[[1]][[4]][[1]][[4]]
Data[[1]][[10]][[1]][[4]]
Data[[1]][[2]][[1]][[4]]
Data[[1]][[2]][[1]]
length(Data[[1]][[2]][[1]])
Data1[1]
Data[1]
length(Data[1])
length(Data[[1]])
length(Data)
Data[[1]]
Data[1]
for (jj in Data){
print(jj)
}
Data[1]
Data[[1]]
length(Data[1])
length(Data[[1]])
Data[[1]]
Data[[1]][[1]]
Data[[1]][[1]][4]
Data[[1]][[1]][1]
Data[[1]][[1]][1][4]
Data[[1]][[1]][[1]][4]
Data[[1]][[2]][[1]][4]
Data[[1]][[3]][[1]][4]
Data[[1]][[2]][[1]]
Data[[1]][[2]][[1]][4]
Data[[1]][[3]][[1]][4]
Data[[1]][[4]][[1]][4]
for (jj in seq_along(Data)){
Temp<-0
for (ii in seq_along(Data[[jj])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
AverageGrade[jj]<-sum(Temp,na.rm=TRUE)
}
for (jj in seq_along(Data)){
Temp<-0
for (ii in seq_along(Data[[jj])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
AverageGrade[jj]<-sum(Temp,na.rm=TRUE)
}
for (jj in seq_along(Data)){
Temp<-0
for (ii in seq_along(Data[[jj]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
AverageGrade[jj]<-sum(Temp,na.rm=TRUE)
}
AverageGrade <- vector(mode='numeric',length=length(a))
for (jj in seq_along(Data)){
Temp<-0
for (ii in seq_along(Data[[jj]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
AverageGrade[jj]<-sum(Temp,na.rm=TRUE)
}
for (ii in seq_along(Data[[1]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
Temp[ii]
seq_along(Data[[1]])
for (ii in seq_along(Data[[1]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
Temp[2]
Temp[[2]]
Data[[1]][[1]][[1]][4]
Data[[1]][[2]][[1]][4]
Data[[1]][[3]][[1]][4]
for (ii in seq_along(Data[[1]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
Temp
sum(Temp,na.rm=TRUE)
AverageGrade <- vector(mode='numeric',length=length(a))
for (jj in seq_along(Data)){
Temp<-vector(mode='numeric',length=length(Data[[jj]]))
for (ii in seq_along(Data[[jj]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
AverageGrade[jj]<-mean(Temp,na.rm=TRUE)
}
for (ii in seq_along(Data[[1]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
Temp
for (ii in seq_along(Data[[2]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
for (ii in seq_along(Data[[3]])){
Temp[ii] <- Data[[1]][[ii]][[1]][4]
}
length(a)
a
length(a)
AverageGrade
AverageGrade <- vector(mode='numeric',length=length(Data))
AverageGrade <- vector(mode='numeric',length=length(Data))
