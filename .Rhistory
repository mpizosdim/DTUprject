ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
}
for (ii in CourseInfoLinks[1:500]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
}
for (ii in CourseInfoLinks[1:300]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
}
for (ii in CourseInfoLinks[1:100]){
#get ECTS` credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
}
for (ii in CourseInfoLinks[1:50]){
#get ECTS` credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
}
ECTS
ECTS[1:50]
for (ii in CourseInfoLinks[1:50]){
#get ECTS` credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
}
for (ii in CourseInfoLinks[1:50]){
#get ECTS` credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}j<-j+1
}
for (ii in CourseInfoLinks[1:50]){
#get ECTS` credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
};j<-j+1
}
for (ii in CourseInfoLinks[1:50]){
#get ECTS` credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
};jj<-jj+1
}
ECTS[1:40]
jj <- 1
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}
#get CourseType
res2 <- try(ECTS[jj]<-GetUrlData(urlPath=ii,state_CourseTypr),silent=TRUE)
if (inherits(res2,'try-error')){
CourseType[jj] <- NA
}else{
CourseTypeTemp <- GetUrlData(urlPath=ii,state_CourseTypr)
CourseType[jj] <- CourseTypeTemp[1]
}
res3 <- try(Department[jj]<-GetUrlData(urlPath=ii,state_GetDepartment),silent=TRUE)
if (inherits(res3,'try-error')){
Department[jj] <- NA
}else{
Department[jj] <- GetUrlData(urlPath=ii,state_GetDepartment)
}
res4<-try(SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary),silent=TRUE)
if (inherits(res4,'try-error')){
SecondaryDepartment[jj] <- 'No'
}else{
SecondaryDepartment[jj]<-GetUrlData(urlPath=ii,state_GetDepartmentSecondary)
}
jj<-jj+1
}
}warnings()
warnings()
rm(list=ls())
source('GetUrlData.R')
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
state_PeriodNumber <- 'span td+ td'
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
CourseNum <- substring(categories,1,5)
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}}
for (ii in CourseInfoLinks[1:200]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else{
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA}}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}}
for (ii in CourseInfoLinks[1:100]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE);jj<-jj+1}
res
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE);jj<-jj+1}
res
for (ii in CourseInfoLinks[1:50]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE);jj<-jj+1}
jj<-1
for (ii in CourseInfoLinks[1:50]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
};jj<-jj+1}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
jj<-jj+1}
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}elseif(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
jj<-jj+1}
for (ii in CourseInfoLinks[1:100]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
jj<-jj+1}
jj<-1
for (ii in CourseInfoLinks[1:91]){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
jj<-jj+1}
ECTS
plotas.numeric(ECTS))
plot(as.numeric(ECTS))
rm(list=ls())
rm(list=ls())
source('GetUrlData.R')
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
## Get courses
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
##Initialazing the data frame, CHECK TO MAKE OVERALL AND NOT FOR WINTER ONLY
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
length(CourseInfoLinks)
for (ii in CourseInfoLinks){
#get ECTS credits
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
jj<-jj+1
}
CourseInfoLinks[92]
ECTS
plot(as.numeric(ECTS))
CourseInfoLinks[92]
url.exists(CourseInfoLinks[92])
install.packages('Rcurl')
install.packages('RCurl')
install.packages("RCurl")
url.exists(CourseInfoLinks[92])
library('RCurl')
url.exists(CourseInfoLinks[92])
url.exists(CourseInfoLinks[91])
rm(list=ls())
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
## Get courses
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
##Initialazing the data frame, CHECK TO MAKE OVERALL AND NOT FOR WINTER ONLY
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
## Get courses
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
## Get Departments
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
## get courses number
CourseNum <- substring(categories,1,5)
##Initialazing the data frame, CHECK TO MAKE OVERALL AND NOT FOR WINTER ONLY
df <- data.frame(matrix(nrow=length(categories),ncol=0))
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
## States
#first page(number)
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
source('GetUrlData.R')
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
require(rvest)
library(stringi)
library(RCurl)
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-unique(categories)
depatments<-GetUrlData(urlPath=url,state=state_GetDepartments)
CourseNum <- substring(categories,1,5)
df <- data.frame(matrix(nrow=length(categories),ncol=0))
## Get Links
CourseInfoLinks <- paste('http://www.kurser.dtu.dk/',CourseNum,'.aspx?menulanguage=en-gb',sep='')
GradeLinks <- paste('http://www.kurser.dtu.dk/courses/',CourseNum,'/info/default.aspx',sep='')
CourseType <- rep(0,length(CourseInfoLinks))
ECTS <- rep(0,length(CourseInfoLinks))
Department <- rep(0,length(CourseInfoLinks))
SecondaryDepartment <- rep(0,length(CourseInfoLinks))
jj <- 1
for (ii in CourseInfoLinks){
#get ECTS credits
if (url.exists(CourseInfoLinks[92])){
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
}else{
ECTS[jj]<-NA
};jj<- jj+1}
ECTS
for (ii in CourseInfoLinks){
#get ECTS credits
if (url.exists(ii)){
res<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS),silent=TRUE)
resB<-try(ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS2),silent=TRUE)
if (inherits(res,'try-error')){
ECTS[jj]<- GetUrlData(urlPath=ii,state_GetECTS2)
}else if(inherits(resB,'try-error')){
ECTS[jj]<-GetUrlData(urlPath=ii,state_GetECTS)
}else{
ECTS[jj]<-NA
}
}else{
ECTS[jj]<-NA
};jj<- jj+1}
rm(list=ls())
require(rvest)
library(stringi)
library(RCurl)
setwd('C:/Users/Dimitrios/Documents/Dimitris_general/R programming my projects/DTUprject')
source('GetUrlData.R')
url<-paste0('http://www.kurser.dtu.dk/search.aspx?lstTeachingPeriod=E1;E2;E3;E4;E5;E1A;',
'E2A;E3A;E4A;E5A;E1B;E2B;E3B;E4B;E5B;E;F1;F2;F3;F4;F5;F1A;F2A;F3A;F4A;F5A;F1B;',
'F2B;F3B;F4B;F5B;F&YearGroup=2014-2015,2015-2016&btnSearch=Search&menulanguage=en-GB')
state_GetCourse<-'#ctl00_PlaceHolderMain_PageHtml td div a'
state_GetDepartments <- '#lstDepartment option'
state_GetECTS <- 'h2+ table tr:nth-child(4) .value'
state_GetECTS2 <- '.normal+ table tr:nth-child(4) .value'
state_CourseTypr <- '.value div:nth-child(1)'
state_CourseTypr2 <-'.normal+ table tr:nth-child(5) .value'
state_GetDepartment <- '.SubTableLevel2 tr:nth-child(1) .page+ td'
state_GetDepartmentSecondary <- '#pagecontents tr:nth-child(2) div'
#second page(information)
state_PeriodNumber <- 'span td+ td'
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
categories<-GetUrlData(urlPath=url,state=state_GetCourse)
